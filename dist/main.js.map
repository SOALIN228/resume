{"version":3,"file":"main.js","sources":["webpack:///webpack/bootstrap","webpack:///./src/js/main.js","webpack:///./src/css/loading.css","webpack:///./src/css/main.css","webpack:///./src/js/sticky-topbar.js","webpack:///./src/js/auto-slide-up.js","webpack:///./src/js/smoothly-navigation.js","webpack:///./src/js/init-swiper.js","webpack:///./src/js/message.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import '../css/loading.css'\r\nimport '../css/main.css'\r\n\r\nimport './sticky-topbar'\r\nimport './auto-slide-up'\r\nimport './smoothly-navigation'\r\nimport './init-swiper'\r\nimport './message'\r\n\r\n$(function () {\r\n  siteWelcome.classList.remove('active')\r\n  // 移除offset完成偏移动画\r\n  window.autoSlideUp.findClosestAndRemoveOffset()\r\n  document.documentElement.style.overflow = ''\r\n\r\n  window.addEventListener('pageshow', function () {\r\n    window.scrollTo(window.scrollY, window.scrollY + 1)\r\n  })\r\n})\r\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","!function () {\r\n  let view = View('#topNavBar')\r\n  // 控制导航栏黏在顶部\r\n  let controller = Controller({\r\n    init: function (view) {\r\n    },\r\n    bindEvents: function () {\r\n      window.addEventListener('scroll', () => {\r\n        if (window.scrollY > 0) {\r\n          this.active()\r\n        } else {\r\n          this.deactive()\r\n        }\r\n      })\r\n    },\r\n    active: function () {\r\n      this.view.classList.add('sticky')\r\n    },\r\n    deactive: function () {\r\n      this.view.classList.remove('sticky')\r\n    }\r\n  })\r\n\r\n  controller.init(view)\r\n}.call()\r\n","!function () {\r\n  let specialTags = document.querySelectorAll('[data-x]')\r\n  for (let i = 0; i < specialTags.length; i++) {\r\n    specialTags[i].classList.add('offset')\r\n  }\r\n\r\n  window.addEventListener('scroll', function () {\r\n    findClosestAndRemoveOffset()\r\n  })\r\n\r\n  // 移除距离顶部最近的属性，达到偏移动画的效果\r\n  function findClosestAndRemoveOffset () {\r\n    let specialTags = document.querySelectorAll('[data-x]')\r\n    let minIndex = 0\r\n    for (let i = 1; i < specialTags.length; i++) {\r\n      if (Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY)) {\r\n        minIndex = i\r\n      }\r\n    }\r\n\r\n    specialTags[minIndex].classList.remove('offset')\r\n    let id = specialTags[minIndex].id\r\n    let a = document.querySelector('a[href=\"#' + id + '\"]')\r\n    let li = a.parentNode\r\n    let brothersAndMe = li.parentNode.children\r\n    for (let i = 0; i < brothersAndMe.length; i++) {\r\n      brothersAndMe[i].classList.remove('highlight')\r\n    }\r\n    li.classList.add('highlight')\r\n  }\r\n\r\n  // 监听鼠标在导航栏上移动\r\n  let liTags = document.querySelectorAll('nav.menu > ul > li')\r\n  for (let i = 0; i < liTags.length; i++) {\r\n    liTags[i].onmouseenter = function (x) {\r\n      x.currentTarget.classList.add('active')\r\n    }\r\n    liTags[i].onmouseleave = function (x) {\r\n      x.currentTarget.classList.remove('active')\r\n    }\r\n  }\r\n\r\n  window.autoSlideUp = {\r\n    findClosestAndRemoveOffset: findClosestAndRemoveOffset\r\n  }\r\n}.call()\r\n","!function () {\r\n  let view = View('nav.menu')\r\n\r\n  let controller = Controller({\r\n    init: function (view) {\r\n      this.initAnimation()\r\n    },\r\n    initAnimation: function () {\r\n      // 注册tween\r\n      function animate (time) {\r\n        requestAnimationFrame(animate)\r\n        TWEEN.update(time)\r\n      }\r\n      requestAnimationFrame(animate)\r\n    },\r\n    bindEvents: function () {\r\n      let aTags = this.view.querySelectorAll('ul > li > a')\r\n      // 监听导航栏点击事件,控制锚点跳转\r\n      for (let i = 0; i < aTags.length; i++) {\r\n        aTags[i].onclick = (x) => {\r\n          x.preventDefault()\r\n          let a = x.currentTarget\r\n          let href = a.getAttribute('href') // #siteAbout\r\n          let element = document.querySelector(href)\r\n          this.scrollToElement(element)\r\n        }\r\n      }\r\n    },\r\n    scrollToElement: function (element) {\r\n      let top = element.offsetTop\r\n      let currentTop = window.scrollY\r\n      let targetTop = top - 80\r\n      let s = targetTop - currentTop\r\n      let coords = { y: currentTop }\r\n      let t = Math.abs((s / 100) * 300)\r\n      t = t > 500 ? 500 : t\r\n      // 使用tween缓动动画\r\n      let tween = new TWEEN.Tween(coords)\r\n      .to({ y: targetTop }, t)\r\n      .easing(TWEEN.Easing.Quadratic.InOut)\r\n      .onUpdate(function () {\r\n        window.scrollTo(0, coords.y)\r\n      }).start()\r\n    }\r\n  })\r\n\r\n  controller.init(view)\r\n}.call()\r\n","!function () {\r\n  let view = View('.swiper-container')\r\n\r\n  let controller = Controller({\r\n    swiper: null,\r\n    init: function (view) {\r\n      this.initSwiper()\r\n    },\r\n    initSwiper: function () {\r\n      this.swiper = new Swiper(this.view, {\r\n        direction: 'horizontal',\r\n        loop: true,\r\n        effect : 'cube',\r\n        autoplay: {\r\n          delay: 3000,\r\n          disableOnInteraction: false,\r\n          stopOnLastSlide: false\r\n        },\r\n        pagination: {\r\n          el: '.swiper-pagination',\r\n        },\r\n        navigation: {\r\n          nextEl: '.swiper-button-next',\r\n          prevEl: '.swiper-button-prev',\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  controller.init(view)\r\n}.call()\r\n","!function () {\r\n  let view = View('#siteMessage')\r\n\r\n  let model = Model({resourceName: 'Message'})\r\n\r\n  let controller = Controller({\r\n    messageList: null,\r\n    form: null,\r\n    init: function (view, model) {\r\n      this.messageList = view.querySelector('#messageList')\r\n      this.form = view.querySelector('#postMessageForm')\r\n      this.loadMessages()\r\n    },\r\n    loadMessages: function () {\r\n      this.model.fetch().then((messages) => {\r\n        let array = messages.map((item) => item.attributes)\r\n        array.forEach((item) => {\r\n          let li = document.createElement('li')\r\n          li.innerText = `${item.name}:${item.content}`\r\n          this.messageList.append(li)\r\n        })\r\n      })\r\n    },\r\n    bindEvents: function () {\r\n      this.form.addEventListener('submit', (e) => {\r\n        e.preventDefault()\r\n        this.saveMessage()\r\n      })\r\n    },\r\n    saveMessage: function () {\r\n      let myForm = this.form\r\n      let name = myForm.querySelector('input[name=name]').value\r\n      let content = myForm.querySelector('input[name=content]').value\r\n      this.model.save({name, content}).then((object) => {\r\n        this.updateMessage(object)\r\n        // 置空内容栏\r\n        myForm.querySelector('input[name=content]').value = ''\r\n      })\r\n    },\r\n    updateMessage: function (object) {\r\n      let li = document.createElement('li')\r\n      li.innerText = `${object.attributes.name}:${object.attributes.content}`\r\n      let messageList = document.querySelector('#messageList')\r\n      messageList.append(li)\r\n    }\r\n  })\r\n\r\n  controller.init(view, model)\r\n}.call()\r\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;AClBA;;;;;;ACAA;;;;;;ACAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAoBA;AACA;;;;;;ACxBA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;;;;;AC7CA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AAxCA;AA2CA;AACA;;;;;;AC/CA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAZA;AAiBA;AAvBA;AA0BA;AACA;;;;;;AC9BA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;AA0CA;AACA;;;A","sourceRoot":""}